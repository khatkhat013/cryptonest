# Nginx Cache Configuration for Crypto Nest
# Location: /etc/nginx/conf.d/crypto-nest-cache.conf
# Or include in your main nginx config file

# Browser caching for static assets
map $sent_http_content_type $expires {
    default                    off;
    
    # Images - 1 year
    image/jpeg                 1y;
    image/gif                  1y;
    image/png                  1y;
    image/webp                 1y;
    image/svg+xml              1y;
    image/x-icon               1y;
    
    # CSS and JS - 1 year
    text/css                   1y;
    application/javascript     1y;
    text/javascript            1y;
    
    # Fonts - 1 year
    font/ttf                   1y;
    font/otf                   1y;
    font/woff                  1y;
    font/woff2                 1y;
    
    # Media - 1 year
    video/mp4                  1y;
    video/webm                 1y;
    audio/mpeg                 1y;
    
    # HTML - 24 hours
    text/html                  24h;
    
    # JSON - API responses - no cache
    application/json           off;
}

# Add this inside your server block:
#
# expires $expires;
#
# For static files specifically:
# location ~* ^/(?:images|css|js|fonts|media|pdf)/ {
#     expires 1y;
#     add_header Cache-Control "public, immutable";
#     add_header X-Content-Type-Options "nosniff";
#     
#     # Gzip compression
#     gzip on;
#     gzip_types text/css application/javascript text/javascript;
# }
#
# location ~* \.(?:png|jpg|jpeg|gif|webp|svg|ico|woff|woff2|ttf|eot|otf)$ {
#     expires 1y;
#     add_header Cache-Control "public, immutable";
#     add_header X-Content-Type-Options "nosniff";
# }
#
# # API routes - no cache
# location /api/ {
#     expires off;
#     add_header Cache-Control "no-cache, no-store, must-revalidate, private";
#     add_header Pragma "no-cache";
# }
#
# # HTML pages - short cache
# location ~ \.html?$ {
#     expires 24h;
#     add_header Cache-Control "public, must-revalidate";
# }
